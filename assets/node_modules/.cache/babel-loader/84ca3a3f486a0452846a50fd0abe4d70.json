{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Buzz/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Buzz/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/Buzz/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/Buzz/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/Buzz/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/Buzz/Desktop/aws-bookstore-demo-app/assets/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";//ID: 1174261\n//Name: Buzz Kho\nimport React from\"react\";import\"../../common/styles/productRow.css\";import{API}from\"aws-amplify\";import StarRating from\"../../common/starRating/StarRating\";import FriendRecommendations from\"../../common/friendRecommendations/FriendRecommendations\";import{Glyphicon}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CartProductRow=/*#__PURE__*/function(_React$Component){_inherits(CartProductRow,_React$Component);var _super=_createSuper(CartProductRow);function CartProductRow(props){var _this;_classCallCheck(this,CartProductRow);_this=_super.call(this,props);_this.onRemove=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({removeLoading:true});_context.next=3;return API.del(\"cart\",\"/cart\",{body:{bookId:_this.props.order.bookId}});case 3:_this.props.calculateTotal();case 4:case\"end\":return _context.stop();}}},_callee);}));_this.onQuantityUpdated=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return API.put(\"cart\",\"/cart\",{body:{bookId:_this.props.order.bookId,quantity:parseInt(event.target.value,10)}});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.state={book:undefined,removeLoading:false};return _this;}_createClass(CartProductRow,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var book;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return this.getBook(this.props.order);case 3:book=_context3.sent;this.setState({book:book});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);alert(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,this,[[0,7]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"getBook\",value:function getBook(order){return API.get(\"books\",\"/books/\".concat(order.bookId),null);}},{key:\"render\",value:function render(){if(!this.state.book)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"white-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"media\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"media-left media-middle\",children:/*#__PURE__*/_jsx(\"img\",{className:\"media-object product-thumb\",src:this.state.book.cover,alt:\"\".concat(this.state.book.name,\" cover\")})}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-body\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"media-heading\",children:[this.state.book.name,/*#__PURE__*/_jsx(\"div\",{className:\"pull-right margin-1\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"$\",this.state.book.price]})})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"small\",{children:this.state.book.category})}),/*#__PURE__*/_jsx(FriendRecommendations,{bookId:this.props.order.bookId}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Rating\",/*#__PURE__*/_jsx(\"div\",{className:\"pull-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",placeholder:\"Quantity\",defaultValue:this.props.order.quantity.toString(),onChange:this.onQuantityUpdated,min:1}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-btn\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-black\",type:\"button\",onClick:this.onRemove,disabled:this.state.removeLoading,children:[this.state.removeLoading&&/*#__PURE__*/_jsx(Glyphicon,{glyph:\"refresh\",className:\"spinning\"}),\"Remove\"]})})]})})]}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(StarRating,{stars:this.state.book.rating})})]})]})});}}]);return CartProductRow;}(React.Component);export default CartProductRow;","map":{"version":3,"sources":["C:/Users/Buzz/Desktop/aws-bookstore-demo-app/assets/src/modules/cart/CartProductRow.tsx"],"names":["React","API","StarRating","FriendRecommendations","Glyphicon","CartProductRow","props","onRemove","setState","removeLoading","del","body","bookId","order","calculateTotal","onQuantityUpdated","event","put","quantity","parseInt","target","value","state","book","undefined","getBook","alert","get","cover","name","price","category","toString","rating","Component"],"mappings":"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","sourcesContent":["\r\n//ID: 1174261\r\n//Name: Buzz Kho\r\n\r\nimport React from \"react\";\r\nimport \"../../common/styles/productRow.css\";\r\nimport { API } from \"aws-amplify\";\r\nimport StarRating from \"../../common/starRating/StarRating\";\r\nimport FriendRecommendations from \"../../common/friendRecommendations/FriendRecommendations\";\r\nimport { Glyphicon } from \"react-bootstrap\";\r\nimport { Book } from \"../bestSellers/BestSellerProductRow\";\r\n\r\n\r\nexport interface Order {\r\n  bookId: string;\r\n  quantity: number;\r\n  price: number\r\n}\r\n\r\ninterface CartProductRowProps {\r\n  order: Order;\r\n  calculateTotal: () => void;\r\n}\r\n\r\ninterface CartProductRowState {\r\n  book: Book | undefined;\r\n  removeLoading: boolean;\r\n}\r\n\r\nexport class CartProductRow extends React.Component<CartProductRowProps, CartProductRowState> {\r\n  constructor(props: CartProductRowProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      book: undefined,\r\n      removeLoading: false\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    try {\r\n      const book = await this.getBook(this.props.order);\r\n      this.setState({ book });\r\n    } catch (e) {\r\n      alert(e);\r\n    }\r\n  }\r\n\r\n  getBook(order: Order) {\r\n    return API.get(\"books\", `/books/${order.bookId}`, null);\r\n  }\r\n\r\n  onRemove = async () => {\r\n    this.setState({ removeLoading: true });\r\n    await API.del(\"cart\", \"/cart\", {\r\n      body: {\r\n        bookId: this.props.order.bookId,\r\n      }\r\n    });\r\n\r\n    this.props.calculateTotal();\r\n  }\r\n\r\n  onQuantityUpdated = async (event: any) => {\r\n    await API.put(\"cart\", \"/cart\", {\r\n      body: {\r\n        bookId: this.props.order.bookId,\r\n        quantity: parseInt(event.target.value, 10)\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.book) return null;\r\n\r\n    return (\r\n      <div className=\"white-box\">\r\n        <div className=\"media\">\r\n          <div className=\"media-left media-middle\">\r\n            <img className=\"media-object product-thumb\" src={this.state.book.cover} alt={`${this.state.book.name} cover`} />\r\n          </div>\r\n          <div className=\"media-body\">\r\n            <h3 className=\"media-heading\">{this.state.book.name}\r\n              <div className=\"pull-right margin-1\">\r\n                <small>${this.state.book.price}</small>\r\n              </div>\r\n            </h3>\r\n            <p>\r\n              <small>{this.state.book.category}</small>\r\n            </p>\r\n            <FriendRecommendations bookId={this.props.order.bookId} />\r\n            <div>\r\n              Rating\r\n              <div className=\"pull-right\">\r\n                <div className=\"input-group\">\r\n\r\n                  <input type=\"number\" className=\"form-control\" placeholder=\"Quantity\" defaultValue={this.props.order.quantity.toString()} onChange={this.onQuantityUpdated} min={1} />\r\n                  <span className=\"input-group-btn\">\r\n                    <button className=\"btn btn-black\" type=\"button\" onClick={this.onRemove} disabled={this.state.removeLoading}>\r\n                      {this.state.removeLoading && <Glyphicon glyph=\"refresh\" className=\"spinning\" />} \r\n                      Remove\r\n                    </button>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <p><StarRating stars={this.state.book.rating} /></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CartProductRow;\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}